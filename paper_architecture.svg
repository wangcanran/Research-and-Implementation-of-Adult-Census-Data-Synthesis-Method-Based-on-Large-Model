<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <!-- 定义样式 -->
  <defs>
    <!-- 箭头标记 -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333333" />
    </marker>
    
    <!-- 虚线箭头 -->
    <marker id="arrowhead-dashed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#E67E22" />
    </marker>
  </defs>

  <!-- 背景 -->
  <rect width="1200" height="800" fill="#FFFFFF"/>

  <!-- 标题 -->
  <text x="600" y="35" font-family="Arial, sans-serif" font-size="22" font-weight="bold" text-anchor="middle" fill="#000000">
    Discriminator-Guided Data Synthesis Framework
  </text>
  <text x="600" y="60" font-family="Arial, sans-serif" font-size="14" font-style="italic" text-anchor="middle" fill="#555555">
    Adult Census Dataset Generation System
  </text>

  <!-- ========================================= -->
  <!-- Phase 1: Discriminator Pre-training -->
  <!-- ========================================= -->
  <g id="phase1">
    <rect x="50" y="100" width="300" height="180" rx="8" fill="#E3F2FD" stroke="#1976D2" stroke-width="2.5"/>
    
    <text x="200" y="130" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#1976D2">
      Phase I: Pre-training
    </text>
    
    <!-- Real Data -->
    <rect x="80" y="150" width="240" height="40" rx="4" fill="#FFFFFF" stroke="#1976D2" stroke-width="1.5"/>
    <text x="200" y="168" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#000000">
      Real Data: 32,561 samples
    </text>
    <text x="200" y="184" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">
      Adult Census (UCI Repository)
    </text>
    
    <!-- Training -->
    <rect x="80" y="200" width="240" height="40" rx="4" fill="#FFFFFF" stroke="#1976D2" stroke-width="1.5"/>
    <text x="200" y="218" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#000000">
      Gradient Boosting Training
    </text>
    <text x="200" y="234" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">
      15 features → 47 dims
    </text>
    
    <!-- Output -->
    <rect x="80" y="250" width="240" height="25" rx="4" fill="#C8E6C9" stroke="#388E3C" stroke-width="1.5"/>
    <text x="200" y="267" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#1B5E20">
      Discriminator (Acc: 96.2%, AUC: 0.99)
    </text>
  </g>

  <!-- Arrow: Phase1 to Phase2 -->
  <line x1="350" y1="190" x2="400" y2="190" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="375" y="180" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">One-time</text>

  <!-- ========================================= -->
  <!-- Phase 2: Iterative Generation -->
  <!-- ========================================= -->
  <g id="phase2">
    <rect x="400" y="100" width="750" height="600" rx="8" fill="#FFF8E1" stroke="#F57C00" stroke-width="2.5"/>
    
    <text x="775" y="130" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#E65100">
      Phase II: Self-Instruct Generation Pipeline
    </text>

    <!-- Scheduler -->
    <rect x="450" y="160" width="340" height="90" rx="6" fill="#FFFFFF" stroke="#F57C00" stroke-width="2"/>
    <text x="620" y="185" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#000000">
      HybridScheduler
    </text>
    <text x="620" y="205" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#555555">
      • 80% Distribution-based Exploration
    </text>
    <text x="620" y="223" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#555555">
      • 20% Discriminator-guided Active Learning
    </text>
    <text x="620" y="241" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#1B5E20">
      Quality-driven Scheduling
    </text>

    <!-- Decomposer -->
    <rect x="810" y="160" width="310" height="90" rx="6" fill="#FFFFFF" stroke="#F57C00" stroke-width="2"/>
    <text x="965" y="185" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#000000">
      SampleWiseDecomposer
    </text>
    <text x="965" y="205" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#555555">
      6-Stage Sequential Generation
    </text>
    <text x="965" y="223" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#555555">
      Demographics → ... → Outcome
    </text>
    <text x="965" y="241" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#1B5E20">
      Distribution Correction (-83% error)
    </text>

    <!-- Demonstration Manager -->
    <rect x="450" y="270" width="670" height="70" rx="6" fill="#FFFFFF" stroke="#F57C00" stroke-width="2"/>
    <text x="785" y="295" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#000000">
      DemonstrationManager
    </text>
    <text x="785" y="315" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#555555">
      Quality (40%) + Similarity (40%) + Uncertainty (20%)
    </text>
    <text x="785" y="333" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#1B5E20">
      3-Metric Demonstration Selection (+3.8%)
    </text>

    <!-- LLM Call -->
    <rect x="450" y="360" width="670" height="60" rx="6" fill="#FFECB3" stroke="#F57C00" stroke-width="2"/>
    <text x="785" y="385" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#E65100">
      GPT-4o-mini API
    </text>
    <text x="785" y="405" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555555">
      Temperature: 0.7 | Max Tokens: 800 | Batch: 10
    </text>

    <!-- Curation -->
    <rect x="450" y="440" width="670" height="70" rx="6" fill="#FFEBEE" stroke="#D32F2F" stroke-width="2"/>
    <text x="785" y="465" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#C62828">
      Curation &amp; Filtering
    </text>
    <text x="785" y="485" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#555555">
      Rule-based Verification + Discriminator Scoring
    </text>
    <text x="785" y="503" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555555">
      Keep samples with score &gt; 0.7
    </text>

    <!-- Generated Samples -->
    <rect x="450" y="530" width="670" height="45" rx="6" fill="#C8E6C9" stroke="#388E3C" stroke-width="2"/>
    <text x="785" y="555" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1B5E20">
      Generated Samples: 3,000 total
    </text>
    <text x="785" y="570" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#1B5E20">
      High-quality: 2,659 (88.6%) | Avg. Authenticity: 0.898
    </text>

    <!-- Feedback Loop -->
    <path d="M 1120 440 L 1140 440 L 1140 205 L 790 205" 
          stroke="#F57C00" stroke-width="2" stroke-dasharray="5,5" 
          fill="none" marker-end="url(#arrowhead-dashed)"/>
    <text x="1130" y="320" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#E65100" transform="rotate(-90 1130 320)">
      Feedback
    </text>

    <!-- Iteration Counter -->
    <rect x="450" y="595" width="670" height="30" rx="4" fill="#FFFFFF" stroke="#F57C00" stroke-width="1"/>
    <text x="785" y="615" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#555555">
      Iteration: 30 batches × 100 samples | Time: 7.5 hours | Cost: $18.5
    </text>
  </g>

  <!-- Arrow: Phase2 to Phase3 -->
  <line x1="785" y1="700" x2="785" y2="730" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- ========================================= -->
  <!-- Phase 3: Evaluation -->
  <!-- ========================================= -->
  <g id="phase3">
    <rect x="50" y="730" width="1100" height="45" rx="8" fill="#E8F5E9" stroke="#388E3C" stroke-width="2.5"/>
    
    <text x="600" y="755" font-family="Arial, sans-serif" font-size="15" font-weight="bold" text-anchor="middle" fill="#1B5E20">
      Phase III: Dual-Track Evaluation
    </text>
  </g>

  <!-- Benchmark Evaluation -->
  <g id="benchmark">
    <rect x="80" y="310" width="280" height="80" rx="6" fill="#FFFFFF" stroke="#1976D2" stroke-width="2"/>
    <text x="220" y="335" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1976D2">
      Benchmark Evaluation
    </text>
    <text x="220" y="355" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555555">
      vs. 32,561 Real Samples
    </text>
    <text x="220" y="372" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#1B5E20">
      Overall: 93.8% | Logic: 100%
    </text>
    <text x="220" y="386" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666666">
      Distribution: 94.6% | Statistics: 86.5%
    </text>
  </g>

  <!-- Direct Evaluation -->
  <g id="direct">
    <rect x="80" y="405" width="280" height="80" rx="6" fill="#FFFFFF" stroke="#1976D2" stroke-width="2"/>
    <text x="220" y="430" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1976D2">
      Direct Evaluation
    </text>
    <text x="220" y="450" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555555">
      Faithfulness + Diversity
    </text>
    <text x="220" y="467" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#1B5E20">
      Faithfulness: 96.9%
    </text>
    <text x="220" y="481" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#D32F2F">
      Diversity: 71.8% (needs improvement)
    </text>
  </g>

  <!-- Evaluation Arrows -->
  <line x1="350" y1="350" x2="400" y2="350" stroke="#1976D2" stroke-width="1.5" stroke-dasharray="3,3"/>
  <line x1="350" y1="445" x2="400" y2="445" stroke="#1976D2" stroke-width="1.5" stroke-dasharray="3,3"/>

  <!-- Phase Labels -->
  <text x="200" y="92" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#1976D2">
    PHASE I
  </text>
  <text x="775" y="92" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#E65100">
    PHASE II
  </text>
  <text x="600" y="722" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#1B5E20">
    PHASE III
  </text>
</svg>
