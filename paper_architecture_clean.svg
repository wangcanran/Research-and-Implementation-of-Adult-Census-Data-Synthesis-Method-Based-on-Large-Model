<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="1200" height="700" xmlns="http://www.w3.org/2000/svg">
  <!-- 定义样式 -->
  <defs>
    <!-- 箭头标记 -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333333" />
    </marker>
    
    <!-- 虚线箭头 -->
    <marker id="arrowhead-dashed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#E67E22" />
    </marker>
  </defs>

  <!-- 背景 -->
  <rect width="1200" height="700" fill="#FFFFFF"/>

  <!-- 标题 -->
  <text x="600" y="35" font-family="Arial, sans-serif" font-size="22" font-weight="bold" text-anchor="middle" fill="#000000">
    Discriminator-Guided Data Synthesis Framework
  </text>

  <!-- ========================================= -->
  <!-- Phase 1: Discriminator Pre-training -->
  <!-- ========================================= -->
  <g id="phase1">
    <rect x="50" y="80" width="300" height="160" rx="8" fill="#E3F2FD" stroke="#1976D2" stroke-width="2.5"/>
    
    <text x="200" y="110" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#1976D2">
      Phase I: Pre-training
    </text>
    
    <!-- Real Data -->
    <rect x="80" y="130" width="240" height="35" rx="4" fill="#FFFFFF" stroke="#1976D2" stroke-width="1.5"/>
    <text x="200" y="153" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#000000">
      Real Dataset
    </text>
    
    <!-- Training -->
    <rect x="80" y="175" width="240" height="35" rx="4" fill="#FFFFFF" stroke="#1976D2" stroke-width="1.5"/>
    <text x="200" y="198" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#000000">
      Model Training
    </text>
    
    <!-- Output -->
    <rect x="80" y="220" width="240" height="25" rx="4" fill="#C8E6C9" stroke="#388E3C" stroke-width="1.5"/>
    <text x="200" y="237" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#1B5E20">
      Trained Discriminator
    </text>
  </g>

  <!-- Arrow: Phase1 to Phase2 -->
  <line x1="350" y1="160" x2="400" y2="160" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- ========================================= -->
  <!-- Phase 2: Iterative Generation -->
  <!-- ========================================= -->
  <g id="phase2">
    <rect x="400" y="80" width="750" height="540" rx="8" fill="#FFF8E1" stroke="#F57C00" stroke-width="2.5"/>
    
    <text x="775" y="110" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#E65100">
      Phase II: Self-Instruct Generation Pipeline
    </text>

    <!-- Scheduler -->
    <rect x="450" y="140" width="340" height="80" rx="6" fill="#FFFFFF" stroke="#F57C00" stroke-width="2"/>
    <text x="620" y="165" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#000000">
      HybridScheduler
    </text>
    <text x="620" y="185" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#555555">
      Distribution Exploration
    </text>
    <text x="620" y="203" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#555555">
      Discriminator-guided Active Learning
    </text>

    <!-- Decomposer -->
    <rect x="810" y="140" width="310" height="80" rx="6" fill="#FFFFFF" stroke="#F57C00" stroke-width="2"/>
    <text x="965" y="165" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#000000">
      SampleWiseDecomposer
    </text>
    <text x="965" y="185" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#555555">
      Sequential Field Generation
    </text>
    <text x="965" y="203" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#555555">
      Distribution Correction
    </text>

    <!-- Demonstration Manager -->
    <rect x="450" y="240" width="670" height="65" rx="6" fill="#FFFFFF" stroke="#F57C00" stroke-width="2"/>
    <text x="785" y="265" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#000000">
      DemonstrationManager
    </text>
    <text x="785" y="285" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#555555">
      Quality-aware Example Selection
    </text>

    <!-- LLM Call -->
    <rect x="450" y="325" width="670" height="55" rx="6" fill="#FFECB3" stroke="#F57C00" stroke-width="2"/>
    <text x="785" y="355" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#E65100">
      Large Language Model
    </text>
    <text x="785" y="373" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555555">
      API Call with Demonstrations
    </text>

    <!-- Curation -->
    <rect x="450" y="400" width="670" height="65" rx="6" fill="#FFEBEE" stroke="#D32F2F" stroke-width="2"/>
    <text x="785" y="425" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#C62828">
      Curation &amp; Filtering
    </text>
    <text x="785" y="445" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#555555">
      Validation + Discriminator Scoring
    </text>

    <!-- Generated Samples -->
    <rect x="450" y="485" width="670" height="40" rx="6" fill="#C8E6C9" stroke="#388E3C" stroke-width="2"/>
    <text x="785" y="510" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#1B5E20">
      High-Quality Synthetic Samples
    </text>

    <!-- Feedback Loop -->
    <path d="M 1120 400 L 1140 400 L 1140 180 L 790 180" 
          stroke="#F57C00" stroke-width="2" stroke-dasharray="5,5" 
          fill="none" marker-end="url(#arrowhead-dashed)"/>
    <text x="1130" y="290" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#E65100" transform="rotate(-90 1130 290)">
      Feedback
    </text>

    <!-- Iteration Info -->
    <rect x="450" y="545" width="670" height="30" rx="4" fill="#FFFFFF" stroke="#F57C00" stroke-width="1"/>
    <text x="785" y="565" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#555555">
      Iterative Self-Instruct Process
    </text>
  </g>

  <!-- Arrow: Phase2 to Phase3 -->
  <line x1="785" y1="620" x2="785" y2="650" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- ========================================= -->
  <!-- Phase 3: Evaluation -->
  <!-- ========================================= -->
  <g id="phase3">
    <rect x="250" y="650" width="1070" height="35" rx="8" fill="#E8F5E9" stroke="#388E3C" stroke-width="2.5"/>
    
    <text x="785" y="673" font-family="Arial, sans-serif" font-size="15" font-weight="bold" text-anchor="middle" fill="#1B5E20">
      Phase III: Dual-Track Evaluation (Benchmark + Direct)
    </text>
  </g>

  <!-- Evaluation Components -->
  <g id="evaluation-boxes">
    <!-- Benchmark -->
    <rect x="350" y="660" width="280" height="20" rx="3" fill="#FFFFFF" stroke="#388E3C" stroke-width="1"/>
    <text x="490" y="674" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555555">
      Benchmark vs. Real Data
    </text>
    
    <!-- Direct -->
    <rect x="670" y="660" width="280" height="20" rx="3" fill="#FFFFFF" stroke="#388E3C" stroke-width="1"/>
    <text x="810" y="674" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555555">
      Faithfulness + Diversity
    </text>
  </g>

  <!-- Phase Labels -->
  <text x="200" y="72" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#1976D2">
    PHASE I
  </text>
  <text x="775" y="72" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#E65100">
    PHASE II
  </text>
  <text x="785" y="642" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#1B5E20">
    PHASE III
  </text>
</svg>
