<svg width="1400" height="800" xmlns="http://www.w3.org/2000/svg" style="background-color: #ffffff;">
  <!-- 纯色定义 - 无渐变 -->
  <defs>
    <!-- 箭头标记 - 最简polygon -->
    <marker id="arrow-simple" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto">
      <polygon points="0 0, 10 4, 0 8" fill="#000000" />
    </marker>
  </defs>

  <!-- 标题 -->
  <text x="700" y="40" font-size="24" font-weight="bold" text-anchor="middle" fill="#000000" style="font-family: Arial, sans-serif;">
    Figure 1: Adult V2 System Architecture
  </text>
  <text x="700" y="70" font-size="14" font-style="italic" text-anchor="middle" fill="#333333" style="font-family: Arial, sans-serif;">
    Discriminator-Guided Neural Data Synthesis Framework
  </text>

  <!-- ====================================== -->
  <!-- 阶段1: 判别器预训练 -->
  <!-- ====================================== -->
  <g id="phase1">
    <!-- 外框 -->
    <rect x="80" y="120" width="360" height="180" rx="4" fill="#e8f4f8" stroke="#0078d4" stroke-width="2.5"/>
    <text x="260" y="150" font-size="16" font-weight="bold" text-anchor="middle" fill="#000000" style="font-family: Arial, sans-serif;">
      Phase I: Discriminator Pre-training
    </text>
    
    <!-- 输入 -->
    <rect x="110" y="165" width="300" height="35" rx="3" fill="#ffffff" stroke="#666666" stroke-width="1.2"/>
    <text x="260" y="188" font-size="12" text-anchor="middle" fill="#000000" style="font-family: Arial, sans-serif;">
      Input: 32,561 Real Adult Census Samples
    </text>
    
    <!-- 处理 -->
    <rect x="110" y="210" width="300" height="50" rx="3" fill="#ffffff" stroke="#666666" stroke-width="1.2"/>
    <text x="260" y="230" font-size="11" text-anchor="middle" fill="#000000" style="font-family: Arial, sans-serif;">
      Model: GradientBoostingClassifier (n_estimators=200)
    </text>
    <text x="260" y="250" font-size="10" text-anchor="middle" fill="#333333" style="font-family: Arial, sans-serif;">
      Features: 15 → 47 dims (OneHot + Scaling)
    </text>
    
    <!-- 输出 -->
    <rect x="110" y="270" width="300" height="30" rx="3" fill="#d4edda" stroke="#28a745" stroke-width="1.5"/>
    <text x="260" y="290" font-size="11" font-weight="bold" text-anchor="middle" fill="#155724" style="font-family: Arial, sans-serif;">
      Output: Trained Discriminator (96.2% Acc, AUC=0.990)
    </text>
  </g>

  <!-- 阶段1→2箭头 -->
  <path d="M 440 210 L 480 210" stroke="#000000" stroke-width="2" fill="none" marker-end="url(#arrow-simple)"/>
  <text x="460" y="200" font-size="10" text-anchor="middle" fill="#666666" style="font-family: Arial, sans-serif;">One-time</text>

  <!-- ====================================== -->
  <!-- 阶段2: Self-Instruct生成 -->
  <!-- ====================================== -->
  <g id="phase2">
    <!-- 外框 -->
    <rect x="520" y="90" width="760" height="520" rx="4" fill="#fff5e6" stroke="#e67e22" stroke-width="2.5"/>
    <text x="900" y="125" font-size="16" font-weight="bold" text-anchor="middle" fill="#000000" style="font-family: Arial, sans-serif;">
      Phase II: Self-Instruct Iterative Generation
    </text>

    <!-- 调度器 -->
    <rect x="570" y="155" width="320" height="100" rx="3" fill="#ffffff" stroke="#d35400" stroke-width="2"/>
    <text x="730" y="183" font-size="13" font-weight="bold" text-anchor="middle" fill="#000000" style="font-family: Arial, sans-serif;">
      HybridScheduler
    </text>
    <text x="730" y="203" font-size="10" text-anchor="middle" fill="#333333" style="font-family: Arial, sans-serif;">
      80% Distribution Exploration
    </text>
    <text x="730" y="220" font-size="10" text-anchor="middle" fill="#333333" style="font-family: Arial, sans-serif;">
      20% Discriminator-Guided Active Learning
    </text>
    <text x="730" y="240" font-size="9" font-weight="bold" text-anchor="middle" fill="#155724" style="font-family: Arial, sans-serif;">
      ⭐ Quality-driven Active Learning
    </text>

    <!-- 分解器 -->
    <rect x="940" y="155" width="300" height="100" rx="3" fill="#ffffff" stroke="#d35400" stroke-width="2"/>
    <text x="1090" y="183" font-size="13" font-weight="bold" text-anchor="middle" fill="#000000" style="font-family: Arial, sans-serif;">
      SampleWiseDecomposer
    </text>
    <text x="1090" y="203" font-size="10" text-anchor="middle" fill="#333333" style="font-family: Arial, sans-serif;">
      6 Field Groups Sequential Generation
    </text>
    <text x="1090" y="220" font-size="10" text-anchor="middle" fill="#333333" style="font-family: Arial, sans-serif;">
      Adaptive Cache: Check every 50 samples
    </text>
    <text x="1090" y="240" font-size="9" font-weight="bold" text-anchor="middle" fill="#155724" style="font-family: Arial, sans-serif;">
      ⭐ Online Distribution Correction (83%↓ Error)
    </text>

    <!-- 示例管理器 -->
    <rect x="720" y="275" width="360" height="80" rx="3" fill="#ffffff" stroke="#d35400" stroke-width="2"/>
    <text x="900" y="303" font-size="13" font-weight="bold" text-anchor="middle" fill="#000000" style="font-family: Arial, sans-serif;">
      DemonstrationManager
    </text>
    <text x="900" y="323" font-size="10" text-anchor="middle" fill="#333333" style="font-family: Arial, sans-serif;">
      3-Metric Selection: Quality(40%) + Similarity(40%) + Uncertainty(20%)
    </text>
    <text x="900" y="343" font-size="9" font-weight="bold" text-anchor="middle" fill="#155724" style="font-family: Arial, sans-serif;">
      ⭐ Quality-aware Demonstration Selection (+3.8%)
    </text>

    <!-- LLM调用 -->
    <rect x="720" y="370" width="360" height="55" rx="3" fill="#fff5e6" stroke="#f39c12" stroke-width="1.8"/>
    <text x="900" y="395" font-size="12" font-weight="bold" text-anchor="middle" fill="#e67e22" style="font-family: Arial, sans-serif;">
      GPT-4o-mini API Call
    </text>
    <text x="900" y="415" font-size="9" text-anchor="middle" fill="#333333" style="font-family: Arial, sans-serif;">
      Batch=10 | Temp=0.7 | Max_tokens=800 | Cost=$6.2
    </text>

    <!-- 验证过滤 -->
    <rect x="720" y="440" width="360" height="70" rx="3" fill="#ffebee" stroke="#e74c3c" stroke-width="1.8"/>
    <text x="900" y="465" font-size="12" font-weight="bold" text-anchor="middle" fill="#c0392b" style="font-family: Arial, sans-serif;">
      Curation (Validation & Filtering)
    </text>
    <text x="900" y="485" font-size="9" text-anchor="middle" fill="#333333" style="font-family: Arial, sans-serif;">
      Rule-based Verifier: 5 Business Constraints
    </text>
    <text x="900" y="500" font-size="9" text-anchor="middle" fill="#333333" style="font-family: Arial, sans-serif;">
      Discriminator Scoring: Keep >0.7 Only
    </text>

    <!-- 输出 -->
    <rect x="720" y="530" width="360" height="35" rx="3" fill="#d4edda" stroke="#28a745" stroke-width="2"/>
    <text x="900" y="555" font-size="12" font-weight="bold" text-anchor="middle" fill="#155724" style="font-family: Arial, sans-serif;">
      2,659 High-Quality Samples (88.6%)
    </text>
  </g>

  <!-- 阶段2→3箭头 -->
  <path d="M 1280 350 L 1320 350 L 1320 620 L 700 620" stroke="#000000" stroke-width="2" fill="none" marker-end="url(#arrow-simple)"/>

  <!-- ====================================== -->
  <!-- 阶段3: 双轨评估 -->
  <!-- ====================================== -->
  <g id="phase3-box">
    <rect x="80" y="660" width="1240" height="120" rx="4" fill="#e8f5e9" stroke="#28a745" stroke-width="2.5"/>
    <text x="700" y="690" font-size="16" font-weight="bold" text-anchor="middle" fill="#000000" style="font-family: Arial, sans-serif;">
      Phase III: Dual-Track Evaluation
    </text>

    <!-- Benchmark评估 -->
    <rect x="120" y="720" width="520" height="45" rx="3" fill="#ffffff" stroke="#28a745" stroke-width="1.8"/>
    <text x="380" y="745" font-size="12" font-weight="bold" text-anchor="middle" fill="#155724" style="font-family: Arial, sans-serif;">
      Benchmark Evaluation (vs 32,561 Real Samples)
    </text>
    <text x="380" y="758" font-size="10" text-anchor="middle" fill="#333333" style="font-family: Arial, sans-serif;">
      Overall: 93.8% | Distribution: 94.6% | Statistics: 86.5%
    </text>
    <text x="380" y="770" font-size="10" text-anchor="middle" fill="#333333" style="font-family: Arial, sans-serif;">
      Logic Consistency: 100% (3,000/3,000)
    </text>

    <!-- Direct评估 -->
    <rect x="780" y="720" width="520" height="45" rx="3" fill="#ffffff" stroke="#28a745" stroke-width="1.8"/>
    <text x="1040" y="745" font-size="12" font-weight="bold" text-anchor="middle" fill="#155724" style="font-family: Arial, sans-serif;">
      Direct Evaluation (Faithfulness + Diversity)
    </text>
    <text x="1040" y="758" font-size="10" text-anchor="middle" fill="#333333" style="font-family: Arial, sans-serif;">
      Faithfulness: 96.9% (Constraint: 100%) | Diversity: 71.8%
    </text>
    <text x="1040" y="770" font-size="10" text-anchor="middle" fill="#d32f2f" style="font-family: Arial, sans-serif;">
      Issue: >50K Category Score 65.0% (Requires Improvement)
    </text>
  </g>

  <!-- 工程指标 -->
  <g id="engineering">
    <rect x="80" y="625" width="1240" height="22" rx="3" fill="#cccccc" opacity="0.3"/>
    <text x="700" y="641" font-size="10" font-weight="bold" text-anchor="middle" fill="#000000" style="font-family: Arial, sans-serif;">
      Engineering: 1,200 Lines | 7.5h Training | API Cost $18.5 | Quality 88.6% | 3 Weeks Work
    </text>
  </g>

  <!-- 阶段编号 -->
  <text x="250" y="110" font-size="12" font-weight="bold" text-anchor="middle" fill="#0078d4" style="font-family: Arial, sans-serif;">Phase I</text>
  <text x="900" y="95" font-size="12" font-weight="bold" text-anchor="middle" fill="#e67e22" style="font-family: Arial, sans-serif;">Phase II</text>
  <text x="700" y="695" font-size="12" font-weight="bold" text-anchor="middle" fill="#28a745" style="font-family: Arial, sans-serif;">Phase III</text>
</svg>