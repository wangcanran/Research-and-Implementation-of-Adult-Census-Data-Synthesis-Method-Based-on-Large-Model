<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="1400" height="850" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- 箭头标记 -->
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
      <polygon points="0 0, 10 5, 0 10" fill="#37474F" />
    </marker>
  </defs>

  <!-- 背景 -->
  <rect width="1400" height="850" fill="#FFFFFF"/>

  <!-- 标题 -->
  <text x="700" y="40" font-family="Arial, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#1A237E">
    Discriminator-Guided Data Synthesis Framework
  </text>

  <!-- 三层标题 -->
  <text x="233" y="90" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#0D47A1">
    Input Layer:
  </text>
  <text x="233" y="115" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#0D47A1">
    Pre-training Module
  </text>

  <text x="700" y="90" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#4A148C">
    Core Engine:
  </text>
  <text x="700" y="115" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#4A148C">
    Self-Instruct Pipeline
  </text>

  <text x="1167" y="90" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#1B5E20">
    Output Layer:
  </text>
  <text x="1167" y="115" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#1B5E20">
    Quality Assurance
  </text>

  <!-- ========================================= -->
  <!-- LEFT COLUMN: INPUT LAYER (蓝色) -->
  <!-- ========================================= -->
  
  <!-- A1: Real Dataset -->
  <g id="A1">
    <rect x="50" y="160" width="366" height="120" rx="12" fill="#E3F2FD" stroke="#1976D2" stroke-width="3"/>
    <text x="80" y="195" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#0D47A1">
      A1
    </text>
    <text x="120" y="195" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#0D47A1">
      Real Dataset
    </text>
    <!-- Icon placeholder -->
    <circle cx="370" cy="185" r="18" fill="none" stroke="#42A5F5" stroke-width="2"/>
    <path d="M 360 185 L 370 175 L 380 185" fill="none" stroke="#42A5F5" stroke-width="2"/>
    <line x1="370" y1="175" x2="370" y2="195" stroke="#42A5F5" stroke-width="2"/>
    
    <text x="233" y="225" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      Ground truth samples
    </text>
    <text x="233" y="245" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      Labeled real-world data
    </text>
  </g>

  <!-- A2: Training Process -->
  <g id="A2">
    <rect x="50" y="310" width="366" height="120" rx="12" fill="#E3F2FD" stroke="#1976D2" stroke-width="3"/>
    <text x="80" y="345" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#0D47A1">
      A2
    </text>
    <text x="120" y="345" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#0D47A1">
      Supervised Learning
    </text>
    <!-- Icon placeholder -->
    <circle cx="370" cy="335" r="18" fill="none" stroke="#42A5F5" stroke-width="2"/>
    <circle cx="370" cy="335" r="12" fill="none" stroke="#42A5F5" stroke-width="2"/>
    <circle cx="370" cy="335" r="6" fill="#42A5F5"/>
    
    <text x="233" y="375" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      Binary classification training
    </text>
    <text x="233" y="395" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      Real vs. Synthetic discrimination
    </text>
  </g>

  <!-- Arrow A1 -> A2 -->
  <path d="M 233 280 L 233 310" stroke="#37474F" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>

  <!-- ========================================= -->
  <!-- MIDDLE COLUMN: CORE ENGINE (紫色) -->
  <!-- ========================================= -->
  
  <!-- 虚线框 -->
  <rect x="466" y="140" width="468" height="560" rx="15" fill="none" stroke="#7B1FA2" stroke-width="3" stroke-dasharray="10,5" opacity="0.5"/>

  <!-- B1: Scheduler -->
  <g id="B1">
    <rect x="484" y="160" width="432" height="120" rx="12" fill="#F3E5F5" stroke="#7B1FA2" stroke-width="3"/>
    <text x="514" y="195" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#4A148C">
      B1
    </text>
    <text x="554" y="195" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#4A148C">
      Adaptive Scheduler
    </text>
    <!-- Icon placeholder -->
    <circle cx="880" cy="185" r="18" fill="none" stroke="#9C27B0" stroke-width="2"/>
    <path d="M 880 175 L 880 195 M 870 185 L 890 185" stroke="#9C27B0" stroke-width="2"/>
    
    <text x="700" y="225" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      Distribution-driven scheduling
    </text>
    <text x="700" y="245" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      Quality-guided active learning
    </text>
  </g>

  <!-- B2: Generator -->
  <g id="B2">
    <rect x="484" y="310" width="432" height="120" rx="12" fill="#F3E5F5" stroke="#7B1FA2" stroke-width="3"/>
    <text x="514" y="345" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#4A148C">
      B2
    </text>
    <text x="554" y="345" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#4A148C">
      LLM Generator
    </text>
    <!-- Icon placeholder -->
    <circle cx="880" cy="335" r="18" fill="none" stroke="#9C27B0" stroke-width="2"/>
    <path d="M 870 335 L 890 335 M 880 325 L 880 345" stroke="#9C27B0" stroke-width="2"/>
    <circle cx="875" cy="330" r="3" fill="#9C27B0"/>
    <circle cx="885" cy="340" r="3" fill="#9C27B0"/>
    
    <text x="700" y="375" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      In-context learning with demos
    </text>
    <text x="700" y="395" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      Sequential field-wise generation
    </text>
  </g>

  <!-- B3: Discriminator Feedback -->
  <g id="B3">
    <rect x="484" y="460" width="432" height="120" rx="12" fill="#F3E5F5" stroke="#7B1FA2" stroke-width="3"/>
    <text x="514" y="495" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#4A148C">
      B3
    </text>
    <text x="554" y="495" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#4A148C">
      Discriminator Scoring
    </text>
    <!-- Icon placeholder -->
    <circle cx="880" cy="485" r="18" fill="none" stroke="#9C27B0" stroke-width="2"/>
    <path d="M 870 485 L 880 475 L 890 485 L 880 495 Z" fill="none" stroke="#9C27B0" stroke-width="2"/>
    
    <text x="700" y="525" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      Real-time quality assessment
    </text>
    <text x="700" y="545" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      Authenticity scoring feedback
    </text>
  </g>

  <!-- B4: Iteration Control -->
  <g id="B4">
    <rect x="484" y="610" width="432" height="80" rx="12" fill="#F3E5F5" stroke="#7B1FA2" stroke-width="3"/>
    <text x="514" y="645" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#4A148C">
      B4
    </text>
    <text x="554" y="645" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#4A148C">
      Iterative Refinement
    </text>
    <!-- Icon placeholder -->
    <circle cx="880" cy="635" r="18" fill="none" stroke="#9C27B0" stroke-width="2"/>
    <path d="M 880 625 Q 890 635 880 645 Q 870 635 880 625" fill="none" stroke="#9C27B0" stroke-width="2"/>
    <polygon points="885,630 890,635 885,640" fill="#9C27B0"/>
    
    <text x="700" y="675" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      Self-instruct feedback loop
    </text>
  </g>

  <!-- Arrows in middle column -->
  <path d="M 700 280 L 700 310" stroke="#37474F" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>
  <path d="M 700 430 L 700 460" stroke="#37474F" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>
  <path d="M 700 580 L 700 610" stroke="#37474F" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>

  <!-- Feedback loop arrow -->
  <path d="M 916 610 L 950 610 L 950 220 L 916 220" stroke="#9C27B0" stroke-width="2.5" stroke-dasharray="8,4" fill="none" marker-end="url(#arrow)"/>

  <!-- ========================================= -->
  <!-- RIGHT COLUMN: OUTPUT LAYER (绿色) -->
  <!-- ========================================= -->
  
  <!-- C1: Validation -->
  <g id="C1">
    <rect x="984" y="160" width="366" height="120" rx="12" fill="#E8F5E9" stroke="#388E3C" stroke-width="3"/>
    <text x="1014" y="195" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1B5E20">
      C1
    </text>
    <text x="1054" y="195" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1B5E20">
      Quality Filter
    </text>
    <!-- Icon placeholder -->
    <circle cx="1304" cy="185" r="18" fill="none" stroke="#4CAF50" stroke-width="2"/>
    <path d="M 1296 185 L 1300 192 L 1312 178" fill="none" stroke="#4CAF50" stroke-width="2"/>
    
    <text x="1167" y="225" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      Rule-based validation
    </text>
    <text x="1167" y="245" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      Threshold-based filtering
    </text>
  </g>

  <!-- C2: Output Dataset -->
  <g id="C2">
    <rect x="984" y="310" width="366" height="120" rx="12" fill="#E8F5E9" stroke="#388E3C" stroke-width="3"/>
    <text x="1014" y="345" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1B5E20">
      C2
    </text>
    <text x="1054" y="345" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1B5E20">
      Synthetic Dataset
    </text>
    <!-- Icon placeholder -->
    <rect x="1286" y="322" width="36" height="28" rx="4" fill="none" stroke="#4CAF50" stroke-width="2"/>
    <line x1="1292" y1="328" x2="1316" y2="328" stroke="#4CAF50" stroke-width="2"/>
    <line x1="1292" y1="335" x2="1310" y2="335" stroke="#4CAF50" stroke-width="2"/>
    <line x1="1292" y1="342" x2="1316" y2="342" stroke="#4CAF50" stroke-width="2"/>
    
    <text x="1167" y="375" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      High-fidelity samples
    </text>
    <text x="1167" y="395" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      Quality-assured output
    </text>
  </g>

  <!-- C3: Evaluation -->
  <g id="C3">
    <rect x="984" y="460" width="366" height="120" rx="12" fill="#E8F5E9" stroke="#388E3C" stroke-width="3"/>
    <text x="1014" y="495" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1B5E20">
      C3
    </text>
    <text x="1054" y="495" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1B5E20">
      Comprehensive Eval
    </text>
    <!-- Icon placeholder -->
    <circle cx="1304" cy="485" r="18" fill="none" stroke="#4CAF50" stroke-width="2"/>
    <path d="M 1292 490 L 1298 495 L 1316 478" fill="none" stroke="#4CAF50" stroke-width="2"/>
    
    <text x="1167" y="525" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      Benchmark similarity check
    </text>
    <text x="1167" y="545" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#37474F">
      Faithfulness + Diversity metrics
    </text>
  </g>

  <!-- Arrows in right column -->
  <path d="M 1167 280 L 1167 310" stroke="#37474F" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>
  <path d="M 1167 430 L 1167 460" stroke="#37474F" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>

  <!-- ========================================= -->
  <!-- CROSS-COLUMN CONNECTIONS -->
  <!-- ========================================= -->
  
  <!-- A2 -> B1 -->
  <path d="M 416 370 L 484 220" stroke="#37474F" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>
  
  <!-- B2 -> C1 -->
  <path d="M 916 370 L 984 220" stroke="#37474F" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>
  
  <!-- B3 -> C1 (dotted) -->
  <path d="M 916 520 L 984 280" stroke="#7B1FA2" stroke-width="2" stroke-dasharray="5,3" fill="none"/>

  <!-- Bottom note -->
  <text x="700" y="800" font-family="Arial, sans-serif" font-size="11" font-style="italic" text-anchor="middle" fill="#757575">
    Three-layer architecture: Pre-training → Self-Instruct Pipeline → Quality Assurance
  </text>
</svg>
